jQuery(document).ready(function(n){function t(e){var t={action:"add_gift_card_amount",amount:n("#gift_card-amount").val(),product_id:n("#post_ID").val()},a=e.closest("span.add-new-amount-section");a.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),n.post(ywgc_data.ajax_url,t,function(e){1==e.code&&n("p._gift_card_amount_field").replaceWith(e.value),n("#gift_card-amount").val(""),n("#gift_card-amount").selectionStart=0,n("#gift_card-amount").selectionEnd=0,n("#gift_card-amount").focus(),a.unblock()})}n(document).on("click","a.remove-amount",function(e){e.preventDefault();var t={action:"remove_gift_card_amount",amount:n(this).closest("span.variation-amount").find('input[name="gift-card-amounts[]"]').val(),product_id:n("#post_ID").val()},a=n(this).closest("span.variation-amount");a.block({message:null,overlayCSS:{background:"#fff url("+ywgc_data.loader+") no-repeat center",opacity:.6}}),n.post(ywgc_data.ajax_url,t,function(e){1==e.code&&a.remove(),a.unblock()})}),n(document).on("click","a.add-new-amount",function(e){e.preventDefault(),t(n(this))}),n(document).on("keypress","input#gift_card-amount",function(e){13===event.which&&(e.preventDefault(),n(this).attr("disabled","disabled"),t(n(this)),n(this).removeAttr("disabled"))}),n(document).on("change",'input[name="ywgc_physical_gift_card"]',function(e){var t=n(this).prop("checked");n('input[name="_virtual"]').prop("checked",!t)}),n(document).on("click",".image-gallery-reset",function(e){e.preventDefault(),n("#ywgc-card-header-image img").remove(),n("#ywgc_product_image_id").val(0)}),n(document).on("click",".image-gallery-chosen",function(e){e.preventDefault();var t,a=n(this).attr("name")+"_id";if(t)t.open();else{var o=[new wp.media.controller.Library({library:wp.media.query(),multiple:!1,title:ywgc_data.choose_image_text,priority:20,filterable:"uploaded"})];(t=wp.media.frames.downloadable_file=wp.media({title:ywgc_data.choose_image_text,library:{type:""},button:{text:ywgc_data.choose_image_text},multiple:!1,states:o})).on("select",function(){n("#ywgc-card-header-image img").remove();var e=t.state().get("selection").first().toJSON();n("#ywgc-card-header-image").prepend('<img width="80" src="'+e.url+'" />'),n("#"+a).val(e.id),n(".plugin-option .upload_img_url").trigger("change")}),t.open()}}),n("body .ywgc_order_sold_as_gift_card").each(function(){n(this).parent("td").find(".wc-order-item-name").hide()})});