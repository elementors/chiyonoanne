!function(t){var a={};function i(e){if(a[e])return a[e].exports;var r=a[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=a,i.d=function(t,a,e){i.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:e})},i.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(a,"a",a),a},i.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},i.p="",i(i.s=5)}([,,,,,function(t,a,i){t.exports=i(6)},function(t,a,i){jQuery(function(t){Promise.resolve().then(function(){return i(7)}).then(function(){t(document).on("wc_variation_form",".variations_form",function(){t(this).WooVariationSwatchesPro()})})})},function(t,a,i){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=Object.assign||function(t){for(var a=1;a<arguments.length;a++){var i=arguments[a];for(var e in i)Object.prototype.hasOwnProperty.call(i,e)&&(t[e]=i[e])}return t},r=function(){function t(t,a){for(var i=0;i<a.length;i++){var e=a[i];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}return function(a,i,e){return i&&t(a.prototype,i),e&&t(a,e),a}}();var o=function(t){var a={},i=function(){function i(e,r){!function(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this,i),this._el=e,this._element=t(e),this._config=t.extend({},a,r),this._generated={},this.product_variations=this._element.data("product_variations"),this.is_ajax_variation=!this.product_variations,this.is_loop=this._element.hasClass("wvs-archive-variation-wrapper"),this._attributeFields=this._element.find(".variations select"),this._wrapper=this._element.closest(woo_variation_swatches_options.archive_product_wrapper),this._cart_button=this._wrapper.find(".wvs_add_to_cart_button"),this._cart_button_ajax=this._wrapper.find(".wvs_ajax_add_to_cart"),this._cart_button_html=this._cart_button.clone().html(),this._image=this._wrapper.find(woo_variation_swatches_options.archive_image_selector),this._price=this._wrapper.find(".price"),this._price_html=this._price.clone().html(),this._product_id=this._cart_button.data("product_id"),this._variation_shown=!1,t.trim(woo_variation_swatches_options.archive_add_to_cart_button_selector)&&(this._cart_button=this._wrapper.find(woo_variation_swatches_options.archive_add_to_cart_button_selector),this._cart_button_ajax=this._wrapper.find(woo_variation_swatches_options.archive_add_to_cart_button_selector)),this.init(this.is_ajax_variation),this.onVariationShownHide(),this.addToCartButton(this.is_ajax_variation),this.is_loop?(this.foundVariation(this.is_ajax_variation),woo_variation_swatches_options.enable_single_variation_preview_archive&&woo_variation_swatches_options.enable_single_variation_preview&&woo_variation_swatches_options.single_variation_preview_attribute&&(this._attributeFieldSingle=this._element.find(".variations select#"+woo_variation_swatches_options.single_variation_preview_attribute),this.changeImages())):(woo_variation_swatches_options.enable_single_variation_preview&&woo_variation_swatches_options.single_variation_preview_attribute&&(this._attributeFieldSingle=this._element.find(".variations select#"+woo_variation_swatches_options.single_variation_preview_attribute),this.changeImages()),woo_variation_swatches_options.enable_linkable_variation_url&&this.generateVariationURL()),t(document).trigger("woo_variation_swatches_pro",[this._element])}return r(i,[{key:"generateVariationURL",value:function(){var a=this,i=new URL(window.location.toString()),r=i.searchParams.toString(),o=i.origin+i.pathname;this._element.on("check_variations.wc-variation-form",function(n){var _=void 0;woo_variation_swatches_options.wc_bundles_enabled?(i=new URL(window.location.toString()),r=i.searchParams.toString(),_=a.getChosenAttributesBundleSupport()):_=a.getChosenAttributes();var s=Object.keys(_).reduce(function(t,a){return _[a]&&(t[a]=_[a]),t},{}),c=[].concat(function(t){if(Array.isArray(t)){for(var a=0,i=Array(t.length);a<t.length;a++)i[a]=t[a];return i}return Array.from(t)}(new URLSearchParams(r).keys())).reduce(function(t,a){return t[a]=new URLSearchParams(r).get(a),t},{}),h=e({},c,s),u=t.param(h);window.history.pushState({},"",a.addQueryArg(o,u))})}},{key:"setDefaultImages",value:function(){var a=this;_.delay(function(){a._element.data("product_variations");a._element.find("ul.variable-items-wrapper.wvs-catalog-variable-wrapper > li:not(.disabled)").each(function(a,i){t(this).off("wvs-selected-item.catalog-image-hover"),t(this).off("wvs-selected-item.catalog-image-click"),t(this).off("mouseenter.catalog-image-hover"),t(this).off("mouseleave.catalog-image-hover"),t(this).hasClass("selected")&&a,"hover"===woo_variation_swatches_options.catalog_mode_event&&t(this).on("mouseenter.catalog-image-hover",function(a){a.stopPropagation(),t(this).trigger("click").trigger("focusin"),t("body").hasClass("woo-variation-swatches-on-mobile")&&t(this).trigger("touchstart")})})},2)}},{key:"onVariationShownHide",value:function(){var t=this;this._element.on("show_variation",{variationForm:this._element},function(a){t._variation_shown=!0}),this._element.on("hide_variation",{variationForm:this._element},function(a){t._variation_shown=!1,t.setDefaultImages()})}},{key:"init",value:function(a){var i=this;_.delay(function(){i.setDefaultImages(),i._element.trigger("woo_variation_swatches_pro_init",[i,i.product_variations]),t(document).trigger("woo_variation_swatches_pro_loaded",[i._element,i.product_variations])},2)}},{key:"foundVariation",value:function(){var a=this;this._element.on("found_variation.wvs-variation-form",{variationForm:this._element},function(i,r){i.stopPropagation(),a.variationsImageUpdate(r);var o="",n=a._wrapper.find(".added_to_cart"),_=a._wrapper.find(".added_to_cart_button"),s=a._wrapper.find(".price");if(o=(o=(o=(r.variation_is_visible?wp.template("wvs-variation-template"):wp.template("unavailable-variation-template"))({variation:r,price_html:t(r.price_html).unwrap().html()||a._price_html})).replace("/*<![CDATA[*/","")).replace("/*]]>*/",""),s.html(o),a._cart_button.data("variation_id",r.variation_id),a._cart_button.data("variation",a.getChosenAttributes()),!woo_variation_swatches_options.enable_catalog_mode&&(woo_variation_swatches_options.archive_add_to_cart_text?a._cart_button.html(woo_variation_swatches_options.archive_add_to_cart_text):wc_add_to_cart_variation_params.i18n_add_to_cart.trim()&&a._cart_button.text(wc_add_to_cart_variation_params.i18n_add_to_cart),"no"===wc_add_to_cart_variation_params.enable_ajax_add_to_cart)){var c=t.param(e({},a.getChosenAttributes(),{"add-to-cart":a._product_id,variation_id:r.variation_id}));a._cart_button.prop("href",a.addQueryArg(a._cart_button.data("add_to_cart_url"),c))}a._cart_button.removeClass("added"),n.length>0&&n.remove(),_.length>0&&_.remove()}),this._element.on("reset_image.wvs-variation-form",{variationForm:this._element},function(t){a.variationsImageUpdate(!1)}),this._element.on("reset_data.wvs-variation-form",{variationForm:this._element},function(t){var i=a._wrapper.find(".price"),e=a._wrapper.find(".added_to_cart"),r=a._wrapper.find(".added_to_cart_button");i.html(a._price_html),a._cart_button.data("variation_id",""),a._cart_button.data("variation",""),woo_variation_swatches_options.enable_catalog_mode||(woo_variation_swatches_options.archive_add_to_cart_select_options?a._cart_button.html(woo_variation_swatches_options.archive_add_to_cart_select_options):wc_add_to_cart_variation_params.i18n_select_options.trim()&&a._cart_button.text(wc_add_to_cart_variation_params.i18n_select_options),"no"===wc_add_to_cart_variation_params.enable_ajax_add_to_cart&&a._cart_button.prop("href",a._cart_button.data("product_permalink"))),a._cart_button.removeClass("added"),e.length>0&&e.remove(),r.length>0&&r.remove()})}},{key:"variationsImageUpdate",value:function(a){this._image.addClass("wvs-pro-image-load").one("webkitAnimationEnd oanimationend msAnimationEnd animationend webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){t(this).removeClass("wvs-pro-image-load")}),a&&a.image&&a.image.thumb_src&&a.image.thumb_src.length>1?(this._image.wc_set_variation_attr("src",a.image.thumb_src),this._image.wc_set_variation_attr("height",a.image.thumb_src_h),this._image.wc_set_variation_attr("width",a.image.thumb_src_w),this._image.wc_set_variation_attr("srcset",a.image.thumb_srcset),this._image.wc_set_variation_attr("sizes",a.image.thumb_sizes),this._image.wc_set_variation_attr("title",a.image.title),this._image.wc_set_variation_attr("alt",a.image.alt)):(this._image.wc_reset_variation_attr("src"),this._image.wc_reset_variation_attr("width"),this._image.wc_reset_variation_attr("height"),this._image.wc_reset_variation_attr("srcset"),this._image.wc_reset_variation_attr("sizes"),this._image.wc_reset_variation_attr("title"),this._image.wc_reset_variation_attr("alt"))}},{key:"addToCartButton",value:function(){this._cart_button_ajax.off("click.wvs-pro-archive-add-to-cart"),this._cart_button_ajax.on("click.wvs-pro-archive-add-to-cart",function(a){var i=t(this);if(woo_variation_swatches_options.enable_catalog_mode)return!0;if(!i.data("variation_id"))return!0;a.preventDefault(),a.stopPropagation(),i.removeClass("added"),i.addClass("loading");var e={action:"wvs_add_variation_to_cart"};t.each(i.data(),function(t,a){e[t]=a}),t(document.body).trigger("adding_to_cart",[i,e]),t.post(wc_add_to_cart_variation_params.ajax_url.toString(),e,function(a){a&&(a.error&&a.product_url?window.location=a.product_url:"yes"!==wc_add_to_cart_params.cart_redirect_after_add?t(document.body).trigger("added_to_cart",[a.fragments,a.cart_hash,i]):window.location=wc_add_to_cart_params.cart_url)})})}},{key:"getChosenAttributesBundleSupport",value:function(){var a={};return this._attributeFields.each(function(){var i=t(this).attr("name"),e=t(this).val()||"";e.length>0&&0,0,a[i]=e}),a}},{key:"getChosenAttributes",value:function(){var a={};return this._attributeFields.each(function(){var i=t(this).data("attribute_name")||t(this).attr("name"),e=t(this).val()||"";e.length>0&&0,0,a[i]=e}),a}},{key:"addQueryArg",value:function(t,a){if(a){a=(a=a.trim().replace(/^(\?|#|&)/,"").replace(/(\?|#|&)$/,""))?"?"+a:a;var i=t.split(/[\?\#]/)[0];a&&/\:\/\/[^\/]*$/.test(i)&&(i+="/");var e=t.match(/(\#.*)$/);t=i+a,e&&(t+=e[0])}return t}},{key:"changeImages",value:function(){var t=this;this._element.on("check_variations.wc-variation-form",function(a){var i=t._element.data("product_variations"),e=t.getChosenAttributesAll(),r=(e.data,t.getChosenAttributesSingle()),o=r.data;if(e.count!==e.chosenCount&&r.count===r.chosenCount){t._element.trigger("update_variation_values");var n=t.findMatchingVariations(i,o).shift();n?_.delay(function(){t._element.trigger("found_variation",[n]),t._element.trigger("wvg_found_variation",[t,n])},50):(r.chosenCount=0,t._element.trigger("update_variation_values"),t._element.trigger("reset_data"))}})}},{key:"getChosenAttributesAll",value:function(){var a={},i=0,e=0;return this._attributeFields.each(function(){var r=t(this).data("attribute_name")||t(this).attr("name"),o=t(this).val()||"";o.length>0&&e++,i++,a[r]=o}),{count:i,chosenCount:e,data:a}}},{key:"getChosenAttributesSingle",value:function(){var a={},i=0,e=0;return this._attributeFieldSingle.each(function(){var r=t(this).data("attribute_name")||t(this).attr("name"),o=t(this).val()||"";o.length>0&&e++,i++,a[r]=o}),{count:i,chosenCount:e,data:a}}},{key:"findMatchingVariations",value:function(t,a){for(var i=[],e=0;e<t.length;e++){var r=t[e];this.isMatch(r.attributes,a)&&i.push(r)}return i}},{key:"isMatch",value:function(t,a){var i=!0;for(var e in t)if(t.hasOwnProperty(e)){var r=t[e],o=a[e];void 0!==r&&void 0!==o&&0!==r.length&&0!==o.length&&r!==o&&(i=!1)}return i}}],[{key:"_jQueryInterface",value:function(t){return this.each(function(){new i(this,t)})}}]),i}();return t.fn.WooVariationSwatchesPro=i._jQueryInterface,t.fn.WooVariationSwatchesPro.Constructor=i,t.fn.WooVariationSwatchesPro.noConflict=function(){return t.fn.WooVariationSwatchesPro=t.fn.WooVariationSwatchesPro,i._jQueryInterface},i}(jQuery);a.default=o}]);